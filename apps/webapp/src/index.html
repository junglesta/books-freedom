<!--
      _                   _
     | |_   _ _ __   __ _| | ____
  _  | | | | | '_ \ / _` | |/ _  \
 | |_| | |_| | | | | (_| | | |_| /
  \___/ \__,_|_| |_|\__, |_|\___/r
                    |___/

 site     : https://junglo.dev
 email    : me@junglo.dev
 twitter    : @rokmatwit

-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0a0a0a" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Books Freedom" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="/icon-192.png" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="canonical" href="https://bf.junglestar.org/" />
  <meta name="description" content="Scan ISBN barcodes and manage your book collection. No account, no cloud, no tracking." />
  <title>Books Freedom</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="icon" type="image/png" href="/icon-192.png" />
  <link rel="stylesheet" href="./assets/styles.css" />
</head>
<body>
  <svg style="position:absolute;width:0;height:0" aria-hidden="true">
    <filter id="dither" color-interpolation-filters="sRGB">
      <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch" result="noise"/>
      <feColorMatrix in="noise" type="saturate" values="0" result="gray"/>
      <feBlend in="SourceGraphic" in2="gray" mode="overlay" result="mixed"/>
      <feComponentTransfer in="mixed">
        <feFuncR type="discrete" tableValues="0 0.831"/>
        <feFuncG type="discrete" tableValues="0 1"/>
        <feFuncB type="discrete" tableValues="0 0"/>
      </feComponentTransfer>
    </filter>
  </svg>
  <div id="app"></div>
  <script type="module" src="./main.ts"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          const registration = await navigator.serviceWorker.register('/sw.js');
          if (registration.waiting) {
            registration.waiting.postMessage({ type: 'SKIP_WAITING' });
          }
        } catch (error) {
          console.error('Service worker registration failed', error);
        }
      });

      let refreshing = false;
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        if (refreshing) return;
        refreshing = true;
        window.location.reload();
      });
    }
  </script>
</body>
</html>
